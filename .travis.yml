language: java
jdk:
- oraclejdk8
branches:
  only:
  - master
jobs:
  include:
    - stage: unit tests
      script: cd waiter && lein with-profiles +test voom build-deps && ./bin/ci/run-unit-tests.sh
    - stage: unit tests
      script: cd kitchen && lein with-profiles +test do voom build-deps, test
    - stage: integration tests
      script: cd waiter && lein with-profiles +test voom build-deps && ./bin/ci/run-integration-tests.sh
